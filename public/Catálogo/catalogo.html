<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AdoptaPet - Catálogo de Mascotas</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg bg-light p-3 border-bottom sticky-top">
        <div class="container">
            <a class="navbar-brand text-danger fw-bold" href="/">
                <i class="fas fa-heart me-1" style="color: #ff6600;"></i> AdoptaPet
            </a>
            <div class="collapse navbar-collapse justify-content-end">
                <ul class="navbar-nav">
                    <li class="nav-item me-2"><a class="nav-link" href="/">Inicio</a></li>
                    <li class="nav-item me-2"><a class="nav-link btn btn-dark text-white fw-bold py-1 px-3 active" href="/catalogo">Mascotas</a></li>
                    <li class="nav-item me-2"><a class="nav-link" href="/acerca-de">Acerca de</a></li>
                    <li class="nav-item"><a class="nav-link" href="/login"><i class="fas fa-sign-in-alt me-1"></i> Iniciar Sesión</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="catalog-header text-white py-5">
        <div class="container">
            <h1 class="fw-bold display-5">Mascotas Disponibles</h1>
            <p class="lead">Encuentra a tu nuevo compañero</p>
        </div>
    </header>

    <div class="container position-relative" style="top: -30px;">
        <div class="bg-white p-3 rounded-4 shadow-sm d-flex align-items-center justify-content-between flex-wrap filter-bar">
            <div class="d-flex align-items-center flex-grow-1 me-3 search-container">
                <i class="fas fa-search text-muted ms-3 me-2"></i>
                <input type="text" class="form-control border-0 shadow-none" placeholder="Buscar por nombre o raza...">
            </div>
            <div class="vr mx-2 d-none d-md-block" style="height: 30px;"></div>
            <div class="ms-3" style="min-width: 150px;">
                <select class="form-select border-0 shadow-none bg-light fw-bold text-secondary">
                    <option selected>Todos</option>
                    <option value="perro">Perros</option>
                    <option value="gato">Gatos</option>
                </select>
            </div>
        </div>
    </div>

    <main class="container pb-5">
        <p class="text-muted mb-4"></p>

        <div id="contenedor-mascota" class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
            
            <div class="col">
                <div class="card h-100 border-0 shadow-sm rounded-4 pet-card">
                    <img src="https://images.unsplash.com/photo-1583511655857-d19b40a7a54e?auto=format&fit=crop&w=600&q=80" 
                        class="card-img-top rounded-top-4" 
                        alt="Max"
                        style="height: 250px; object-fit: cover;">
                        
                    <div class="card-body">
                        <h5 class="card-title fw-bold mb-0">Max</h5>
                        <p class="text-muted small mb-2">Golden Retriever</p>
                        <p class="card-text small text-secondary mb-3">
                            <i class="fas fa-venus-mars me-1"></i> Macho • 
                            <i class="fas fa-calendar-alt me-1"></i> 2 Años
                        </p>
                        <a href="/detalles-mascota" class="btn btn-primary w-100 fw-bold rounded-pill">
                            Ver Detalles
                        </a>
            </div>
        </div>
    </main>

    <footer class="bg-dark text-white pt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold"><i class="fas fa-heart me-1" style="color: #ff6600;"></i> AdoptaPet</h5>
                    <p class="text-muted small">Conectando mascotas con hogares amorosos desde 2020.</p>
                </div>
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold">Enlaces</h5>
                    <ul class="list-unstyled">
                        <li><a href="/" class="text-white text-decoration-none">Inicio</a></li>
                        <li><a href="/catalogo" class="text-white text-decoration-none">Mascotas</a></li>
                        <li><a href="/acerca-de" class="text-white text-decoration-none">Acerca de</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold">Legal</h5>
                    <ul class="list-unstyled">
                        <li><a href="#" class="text-white text-decoration-none">Términos y condiciones</a></li>
                        <li><a href="#" class="text-white text-decoration-none">Política de privacidad</a></li>
                    </ul>
                </div>
                <div class="col-md-3 mb-4">
                    <h5 class="fw-bold">Contacto</h5>
                    <ul class="list-unstyled text-muted small">
                        <li>info@adoptapet.com</li>
                        <li>+52 (123) 456-7890</li>
                        <li>Calle Principal 123</li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="text-center py-3 border-top border-secondary footer-copyright" ></div>
            <p class="mb-0 small text-muted text-white 025"> AdoptaPet. Todos los derechos reservados.</p>
        </div>
    </footer>

    
    <script>
        const ageRange = document.getElementById('filter-age');
        const ageValue = document.getElementById('age-value');
        if (ageRange && ageValue) {
            ageRange.addEventListener('input', () => {
                ageValue.textContent = ageRange.value;
            });
        }

    document.addEventListener('DOMContentLoaded', function() {
    const contenedor = document.getElementById('contenedor-mascotas');

    function crearMascota() {
        fetch('/api/mascotas')
            .then(response => {
                if (!response.ok) {
                    throw new Error('Error al obtener datos del servidor: ' + response.statusText);
                }
                return response.json(); 
            })
            .then(mascotas => {
                if (mascotas && mascotas.length > 0) {
                    let htmlGenerado = '';
                    
                    mascotas.forEach(mascota => {
                        htmlGenerado += `
                            <div class="col">
                                <div class="card h-100 border-0 shadow-sm rounded-4 pet-card">
                                    <img src="https://picsum.photos/300/250?random=${mascota.mascota_id}" class="card-img-top rounded-top-4" alt="${mascota.nombre}" style="height: 250px; object-fit: cover;">
                                    <div class="card-body">
                                        <h5 class="card-title fw-bold mb-0">${mascota.nombre}</h5>
                                        <p class="text-muted small mb-2">${mascota.raza}</p>
                                        <p class="card-text small text-secondary mb-3">
                                            ${mascota.edad_anios} años • ${mascota.especie}
                                        </p>
                                        <a href="detalle-mascota.html?id=${mascota.mascota_id}" class="btn btn-primary w-100 fw-bold rounded-pill">Ver Detalles</a>
                                    </div>
                                </div>
                            </div>
                        `;
                    });
                    contenedor.innerHTML = htmlGenerado;
                } else {
                    contenedor.innerHTML = '<p class="text-center text-muted">No hay mascotas disponibles.</p>';
                }
            })
            .catch(error => {
                contenedor.innerHTML = `<p class="text-danger text-center">Error: No se pudo cargar el catálogo. ${error.message}</p>`;
            });
        
        crearMascota();
        }});
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</body>
</html>